(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{149:function(e,t,a){e.exports=a(317)},313:function(e,t,a){},314:function(e,t,a){},315:function(e,t,a){},316:function(e,t,a){},317:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),l=a.n(c),o=a(10),s=a(11),i=a(13),u=a(12),m=a(14),p=a(34),d=a(35),h=a(319),E=a(320),b=function(e){function t(e){var a,n;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).resetTransform=function(){var e=window.pageYOffset/3;a.setState({transform:"translate3d(0,"+e+"px,0)"})},n=window.innerWidth>=768?window.pageYOffset/3:0,a.state={transform:"translate3d(0,"+n+"px,0)"},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){if(document.body.classList.add("ecommerce-page"),window.innerWidth>=768){var e=window.pageYOffset/3;this.setState({transform:"translate3d(0,"+e+"px,0)"}),window.addEventListener("scroll",this.resetTransform)}}},{key:"componentWillUnmount",value:function(){window.innerWidth>=768&&window.removeEventListener("scroll",this.resetTransform)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"header header-1"},r.a.createElement("div",{className:"page-header header-filter"},r.a.createElement("div",{className:"page-header-image",style:{backgroundImage:"url(https://foodrevolution.org/wp-content/uploads/blog-featured_healthy_foods-20180306.jpg)",transform:this.state.transform}}),r.a.createElement(h.a,null,r.a.createElement("div",{className:"mr-auto text-left col-md-7 col-lg-6"},r.a.createElement("h1",{className:"title"},"Pick a Place"))))),r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"section"},r.a.createElement(h.a,{className:"mx-auto text-center"},r.a.createElement("h3",null,"Don't know what to eat?"),r.a.createElement("h4",null,"Let the fates decide for you"),r.a.createElement(E.a,{className:"btn btn-primary",onClick:function(){e.props.history.push("/rtd")}},"Roll the Dice"))))))}}]),t}(n.Component),f=a(15),g=a(141),v=a.n(g),y=function(e){var t={method:"POST",data:e};return v()("api/yelp",t)},O=a(64),w=a.n(O),k=function(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1)),n=[e[a],e[t]];e[t]=n[0],e[a]=n[1]}return e},N=a(325),j=a(326),S=a(321),C=a(322),L=a(323),x=a(324),_=a(142),T=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=Math.round(this.props.business.distance/1600);return r.a.createElement(S.a,{className:"card-profile profile-bg"},r.a.createElement("a",{href:this.props.business.url},r.a.createElement("div",{style:{height:"231.762px",display:"flex",alignItems:"center",overflow:"hidden"}},r.a.createElement(C.a,{src:this.props.business.image_url,style:{flex:"none",width:"100%"}}))),r.a.createElement(L.a,{tag:"h3"},this.props.business.name),r.a.createElement(x.a,{className:"text-center"},r.a.createElement(_.a,{readonly:!0,initialRating:this.props.business.rating,emptySymbol:r.a.createElement("i",{className:"far fa-star"}),fullSymbol:r.a.createElement("i",{className:"fas fa-star"})}),r.a.createElement("br",null),r.a.createElement("strong",null,"".concat(this.props.business.location.address1,", ").concat(this.props.business.location.city,", ").concat(this.props.business.location.zip_code)),r.a.createElement("br",null),r.a.createElement("strong",null,this.props.business.display_phone),r.a.createElement("br",null)),r.a.createElement(x.a,{className:"text-left ml-3 mt-3 mb-3"},r.a.createElement("strong",null,"Distance:")," ",1===e?e+" mile":e+" miles",r.a.createElement("br",null),r.a.createElement("strong",null,"Price:")," ",this.props.business.price,r.a.createElement("br",null),r.a.createElement("strong",null,"Reviews:")," ",this.props.business.review_count,r.a.createElement("br",null),r.a.createElement("strong",null,"Categories:")," ",this.props.business.categories.map(function(e,t){return(t?", ":"")+e.title})))}}]),t}(r.a.Component),R=a(26),F=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={results:[]},a.handleLocationLogic=function(){a.props.search&&a.props.search.location?a.rtd():a.getGeoLocation()},a.rtd=function(e){var t=Object(f.a)({},a.props.search);e&&(t.longitude=e.coords.longitude,t.latitude=e.coords.latitude),y(t).then(function(e){e.data.businesses&&(e.data.businesses[0]?(a.setState({businesses:e.data.businesses}),a.shuffleAndSlice(e.data)):w.a.fire({type:"error",title:"No Results",text:"Please try a different search",background:"#171941"})),e.data.error&&w.a.fire({type:"error",title:"Error",text:e.data.error.description,background:"#171941"})}).catch(console.log)},a.shuffleAndSlice=function(e){e=e.businesses?e.businesses:a.state.businesses;var t=k(e).slice(0,3);a.setState({results:t})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.handleLocationLogic()}},{key:"componentDidUpdate",value:function(e){this.props.search!==e.search&&this.handleLocationLogic()}},{key:"getGeoLocation",value:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(this.rtd,this.throwSwalLocationError):this.throwSwalLocationError()}},{key:"throwSwalLocationError",value:function(){w.a.fire({type:"error",title:"Location not found",text:"Make sure you allow location access or do a custom search.",background:"#171941"})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement(N.a,{style:{marginTop:"100px"}},this.state.results&&this.state.results.map(function(e){return r.a.createElement(j.a,{sm:"4",key:e.id},r.a.createElement(T,{business:e}))})),r.a.createElement(N.a,null,r.a.createElement(j.a,{className:"text-center mt-3"},this.state.results[0]?r.a.createElement(E.a,{size:"lg",color:"success",onClick:this.shuffleAndSlice},"Reroll"):null))))}}]),t}(n.Component),M=Object(R.b)(function(e){return{search:e.search.item}})(F),P=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/rtd",component:M}),r.a.createElement(d.a,{path:"/",component:b}))}}]),t}(r.a.Component),D=a(333),A=a(334),B=a(338),U=a(327),W=a(335),q=a(336),H=a(148),z=a(337),I=a(328),Y=a(329),G=a(330),J=a(331),V=a(332),$=a(44),K=a(21),Q={category:"",location:"",useLocation:!1,radius:"1609",open_now:!1},X=K.object().shape({category:K.string().required("Category is required"),location:K.string().when("useLocation",{is:!1,then:K.string().required("Location is required"),otherwise:K.string()}),useLocation:K.bool(),price:K.string(),radius:K.string(),open_now:K.bool()}),Z=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isOpen:!1,price:[]},a.toggleModal=function(){a.setState({isOpen:!a.state.isOpen})},a.priceBtn=function(e){var t=a.state.price.indexOf(e);t<0?a.state.price.push(e):a.state.price.splice(t,1),a.setState({price:Object(H.a)(a.state.price)})},a.getBusiness=function(e,t){var n={term:t.category,radius:t.radius,open_now:t.open_now};if(a.state.price[0]){var r="";a.state.price.forEach(function(e){r=r+e+","}),n.price=r.substr(0,r.length-1)}e?(n.longitude=e.coords.longitude,n.latitude=e.coords.latitude):n.location=t.location,console.log(n),a.props.setSearch(n),a.toggleModal(),a.props.history.push("/rtd")},a.checkUseLocation=function(e){e.useLocation?navigator.geolocation.getCurrentPosition(function(t){return a.getBusiness(t,e)}):a.getBusiness(null,e)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{onClick:this.toggleModal,href:"#"},r.a.createElement("i",{className:"tim-icons icon-zoom-split"}),"Search"),r.a.createElement(z.a,{isOpen:this.state.isOpen,toggle:this.toggleModal,modalClassName:"modal-black"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.toggleModal},r.a.createElement("i",{className:"tim-icons icon-simple-remove"})),r.a.createElement("h5",{className:"modal-title"},"Search")),r.a.createElement($.d,{initialValues:Q,validationSchema:X,onSubmit:this.checkUseLocation},function(t){var a=t.values,n=t.handleChange,c=t.handleBlur,l=t.handleSubmit;return r.a.createElement(r.a.Fragment,null,r.a.createElement($.c,{className:"form",onSubmit:l},r.a.createElement(I.a,null,r.a.createElement(h.a,null,r.a.createElement(N.a,null,r.a.createElement("label",null,"Category"),r.a.createElement(Y.a,{name:"category",placeholder:"Category",type:"text",value:a.category,onChange:n,onFocus:function(){e.setState({categoryFocus:!0})},onBlur:function(t){c(t),e.setState({categoryFocus:!1})}}),r.a.createElement($.a,{name:"category"},function(e){return r.a.createElement("div",{className:"text-danger"},e)})),r.a.createElement(N.a,null,r.a.createElement("label",null,"Location"),r.a.createElement(Y.a,{name:"location",placeholder:"Location",type:"text",value:a.location,onChange:n,onFocus:function(){e.setState({locationFocus:!0})},onBlur:function(t){c(t),e.setState({locationFocus:!1})},disabled:a.useLocation}),r.a.createElement($.a,{name:"location"},function(e){return r.a.createElement("div",{className:"text-danger"},e)})),r.a.createElement(N.a,{className:"mb-2"},r.a.createElement(G.a,{check:!0},r.a.createElement(J.a,{check:!0},r.a.createElement(Y.a,{name:"useLocation",type:"checkbox",value:a.useLocation,onChange:n})," ","Use Location",r.a.createElement("span",{className:"form-check-sign"},r.a.createElement("span",{className:"check"}))))),r.a.createElement(N.a,null,r.a.createElement(J.a,null,"Distance"),r.a.createElement(Y.a,{style:{backgroundColor:"#171941"},type:"select",name:"radius",value:a.radius,onChange:n},r.a.createElement("option",{value:1609},"1 mile"),r.a.createElement("option",{value:8046},"5 miles"),r.a.createElement("option",{value:16093},"10 miles"),r.a.createElement("option",{value:32186},"20 miles"))),r.a.createElement(N.a,{className:"mt-2"},r.a.createElement($.b,{name:"price",render:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"mr-3"},"Price"),[1,2,3,4].map(function(t){return r.a.createElement(G.a,{key:t,check:!0,inline:!0},r.a.createElement(J.a,{check:!0},r.a.createElement(Y.a,{name:"price.".concat(t),type:"checkbox",onClick:function(){e.priceBtn(t)}})," ","$".repeat(t),r.a.createElement("span",{className:"form-check-sign"},r.a.createElement("span",{className:"check"}))))}))}})),r.a.createElement(N.a,null,r.a.createElement(G.a,{check:!0},r.a.createElement(J.a,{check:!0},r.a.createElement(Y.a,{name:"open_now",type:"checkbox",value:a.open_now,onChange:n}),"","Open Now",r.a.createElement("span",{className:"form-check-sign"},r.a.createElement("span",{className:"check"}))))))),r.a.createElement(V.a,null,r.a.createElement(E.a,{color:"primary",type:"submit"},"Submit"))))})))}}]),t}(r.a.Component),ee=Object(d.e)(Object(R.b)(function(e){return{posts:e.search.items}},{setSearch:function(e){return function(t){t({type:"SET_SEARCH",payload:e})}}})(Z)),te=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={navbarColor:"navbar-transparent"},a.changeNavbarColor=function(){document.documentElement.scrollTop>299||document.body.scrollTop>299?a.setState({navbarColor:"bg-info"}):(document.documentElement.scrollTop<300||document.body.scrollTop<300)&&a.setState({navbarColor:"navbar-transparent"})},a.handleRoutes=function(e){a.props.history.push(e)},a.handleRollTheDice=function(){a.props.resetSearch(),a.props.history.push("/rtd")},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.changeNavbarColor)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.changeNavbarColor)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{className:"fixed-top "+this.state.navbarColor,expand:"lg"},r.a.createElement(h.a,null,r.a.createElement("div",{className:"navbar-translate"},r.a.createElement(A.a,{to:"/",tag:p.b},r.a.createElement("span",null,"Pick a Place")),r.a.createElement("button",{className:"navbar-toggler",id:"navigation"},r.a.createElement("span",{className:"navbar-toggler-bar bar1"}),r.a.createElement("span",{className:"navbar-toggler-bar bar2"}),r.a.createElement("span",{className:"navbar-toggler-bar bar3"}))),r.a.createElement(B.a,{navbar:!0,toggler:"#navigation",style:{overflow:"auto"}},r.a.createElement("div",{className:"navbar-collapse-header"},r.a.createElement(N.a,null,r.a.createElement(j.a,{className:"collapse-brand",xs:"6"},r.a.createElement(U.a,{to:"/",tag:p.b},r.a.createElement("span",null,"Pick a Place"))),r.a.createElement(j.a,{className:"collapse-close text-right",xs:"6"},r.a.createElement("button",{className:"navbar-toggler",id:"navigation"},r.a.createElement("i",{className:"tim-icons icon-simple-remove"}))))),r.a.createElement(W.a,{className:"ml-auto",navbar:!0},r.a.createElement(q.a,null,r.a.createElement(U.a,{href:"#",onClick:this.handleRollTheDice},r.a.createElement("i",{className:"tim-icons icon-app"}),"Roll The Dice")),r.a.createElement(q.a,null,r.a.createElement(ee,null)))))))}}]),t}(r.a.Component),ae=Object(d.e)(Object(R.b)(null,{resetSearch:function(){return function(e){e({type:"RESET_SEARCH"})}}})(te)),ne=a(28),re=a(147),ce={item:{term:"restaurant",radius:8046,limit:50,open_now:!0,price:1}},le=Object(ne.c)({search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SEARCH":return Object(f.a)({},e,{item:t.payload});case"RESET_SEARCH":return ce;default:return e}}}),oe=[re.a],se=Object(ne.e)(le,{},Object(ne.d)(ne.a.apply(void 0,oe))),ie=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(R.a,{store:se},r.a.createElement(p.a,null,r.a.createElement(ae,null),r.a.createElement(P,null)))}}]),t}(n.Component);a(313),a(314),a(315),a(316);l.a.render(r.a.createElement(ie,null),document.getElementById("root"))}},[[149,1,2]]]);
//# sourceMappingURL=main.ade9a228.chunk.js.map